<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Comic Reader</title>
    <link rel="stylesheet" href="./shared/utils/normalizer.css">
    </link>
    <link rel="stylesheet" href="./styles.css">
    </link>
</head>

<body>
    <header>
        <nav>
            <ul>
                <li>
                    <a href="/Biblioteca.html">Home</a>
                </li>
                <li>
                    <a href="">About</a>
                </li>
                <li>
                    <a href="">Archive</a>
                </li>
                <li>
                    <a href="/cascada.html">Cascada</a>
                </li>
                <li>
                    <a href="">Characters</a>
                </li>
            </ul>
        </nav>
    </header>
    <main class="main-content">
        <div>
            <button id="prev-button">Prev</button>
            <select name="pagina" id="page-select">
            </select>
            <button id="next-button">Next</button>
        </div>
        <a class="img-container" id="pic-container">
            <img src="assets/images/mangas/hajime-no-ippo/el-regreso-del-aspirante/1.jpg" alt="image main">
        </a>
        <div>
            <button id="prev-button">Prev</button>
            <select name="pagina" id="page-select">
            </select>
            <button id="next-button">Next</button>
        </div>
    </main>
    <footer>
        <section class="comments-container">

        </section>
        <section class="brand-container">
            <img src="assets/images/brand/cute-shiba-inu-dog-cartoon-element-png.webp" alt="logo team shiba"
                loading="lazy">
            <h3>Creado por team Shiba</h3>
        </section>
    </footer>
</body>

</html>

<script>
    const pageSelect = document.getElementById("page-select");
    const imgContainer = document.querySelector(".img-container img");

    let mangaChapterInfo = null;
    /**
     * Simulando Peticion al JSON con informaciÃ³n del cap
     * */
    const rutaJson = './shared/jsons/mangas/hajime-no-ippo.json';
    fetch(rutaJson)
        .then(response => {
            return response.json();
        })
        .then(data => {
            mangaChapterInfo = data;
            for (let index = 1; index < mangaChapterInfo.chapters[0].pages + 1; index++) {
                const option = document.createElement("option");
                option.value = index;
                option.textContent = `Capitulo ${index}`;
                pageSelect.appendChild(option);
            }
        })
        .catch(error => {
            console.error(error);
        })

    /**
   * Manejo de paginas del capitulo
   * */

    pageSelect.addEventListener("change", (event) => {
        const selectedPage = event.target.value;
        imgContainer.src = `assets/images/mangas/hajime-no-ippo/el-regreso-del-aspirante/${selectedPage}.jpg`;
    });

    const prevButton = document.getElementById("prev-button");
    const nextButton = document.getElementById("next-button");

    const picContainer = document.getElementById("pic-container");

    let currentPage = parseInt(pageSelect.value) ?? 1;

    prevButton.addEventListener("click", () => {
        currentPage = parseInt(pageSelect.value) ?? 1;
        if (currentPage > 1) {
            currentPage = currentPage - 1;
            pageSelect.value = currentPage;
            imgContainer.src = `assets/images/mangas/hajime-no-ippo/el-regreso-del-aspirante/${currentPage}.jpg`;
        }
    });

    picContainer.addEventListener("click", () => {
        console.log("click");
        currentPage = parseInt(pageSelect.value) ?? 1;
        currentPage = currentPage + 1;
        pageSelect.value = currentPage;
        console.log(pageSelect.value)
        imgContainer.src = `assets/images/mangas/hajime-no-ippo/el-regreso-del-aspirante/${currentPage}.jpg`;
    });
    

    nextButton.addEventListener("click", () => {
        currentPage = parseInt(pageSelect.value) ?? 1;
        currentPage = currentPage + 1;
        pageSelect.value = currentPage;
        console.log(pageSelect.value)
        imgContainer.src = `assets/images/mangas/hajime-no-ippo/el-regreso-del-aspirante/${currentPage}.jpg`;
    });
</script>